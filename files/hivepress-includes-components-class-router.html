<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>HivePress Code Reference</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../images/favicon.png" />
    <link rel="apple-touch-icon" href="../images/apple-touch-icon.png"/>
    <link rel="apple-touch-icon" sizes="72x72" href="../images/apple-touch-icon-72x72.png"/>
    <link rel="apple-touch-icon" sizes="114x114" href="../images/apple-touch-icon-114x114.png"/>
    <link rel="stylesheet" href="../css/normalize.css">
    <link rel="stylesheet" href="../css/base.css?updated=1729724201">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/template.css?updated=1729724201">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/css/all.min.css" integrity="sha256-ybRkN9dBjhcS2qrW1z+hfCxq+1aBdwyQM5wlQoQVt/0=" crossorigin="anonymous" />
            <script src="https://cdn.jsdelivr.net/npm/css-vars-ponyfill@2"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0/js/all.min.js" integrity="sha256-0vuk8LXoyrmCjp1f0O300qo1M75ZQyhH9X3J6d+scmk=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tarekraafat/autocomplete.js@7.2.0/dist/js/autoComplete.min.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WB2WZE22L6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WB2WZE22L6');
</script>
        <script src="../js/prism.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.dispatchEvent(new HashChangeEvent('hashchange'));
        });
    </script>
</head>
<body id="top">
    <header class="phpdocumentor-top-header">
    <section class="phpdocumentor-section">
        <div class="site-branding">
            <a class="site-logo" href="https://hivepress.io/"><img width="186" src="../images/logo.svg" alt="HivePress" /></a>
        </div>
        <nav class="main-navigation">
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="https://hivepress.github.io/hook-reference/">Hook Reference</a></li>
                <li><a href="https://help.hivepress.io/">Knowledge Base</a></li>
            </ul>
        </nav>
    </section>
</header>
    
    <main class="phpdocumentor">
        <div class="phpdocumentor-section">
            <aside class="phpdocumentor-column -four phpdocumentor-sidebar">
    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Namespaces</h2>
                                <h3 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/default.html"><abbr title="\">Global</abbr></a></h3>
                                        <h4 class="phpdocumentor-sidebar__root-namespace"><a href="../namespaces/hivepress.html"><abbr title="\HivePress">HivePress</abbr></a></h4>
                <ul class="phpdocumentor-list">
                                            <li><a href="../namespaces/hivepress-blocks.html"><abbr title="\HivePress\Blocks">Blocks</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-components.html"><abbr title="\HivePress\Components">Components</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-controllers.html"><abbr title="\HivePress\Controllers">Controllers</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-emails.html"><abbr title="\HivePress\Emails">Emails</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-fields.html"><abbr title="\HivePress\Fields">Fields</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-forms.html"><abbr title="\HivePress\Forms">Forms</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-helpers.html"><abbr title="\HivePress\Helpers">Helpers</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-integrations.html"><abbr title="\HivePress\Integrations">Integrations</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-menus.html"><abbr title="\HivePress\Menus">Menus</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-models.html"><abbr title="\HivePress\Models">Models</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-queries.html"><abbr title="\HivePress\Queries">Queries</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-templates.html"><abbr title="\HivePress\Templates">Templates</abbr></a></li>
                                            <li><a href="../namespaces/hivepress-traits.html"><abbr title="\HivePress\Traits">Traits</abbr></a></li>
                                    </ul>
                        </section>

    
    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Indices</h2>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../indices/files.html">Files</a></h3>
    </section>

    <section class="phpdocumentor-sidebar__category">
        <h2 class="phpdocumentor-sidebar__category-header">Reports</h2>
                <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/deprecated.html">Deprecated</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/markers.html">Markers</a></h3>
        <h3 class="phpdocumentor-sidebar__root-package"><a href="../reports/errors.html">Errors</a></h3>
    </section>
</aside>

            <div class="phpdocumentor-column -eight phpdocumentor-content">
                    <ul class="phpdocumentor-breadcrumbs">
    </ul>

    <article class="phpdocumentor-element -file">
        <h2 class="phpdocumentor-content__title">class-router.php</h2>

                

        
                    <h3 class="phpdocumentor-elements__header" id="source-code">
                Source code
                <a href="#source-code" class="headerlink"><i class="fas fa-link"></i></a>
            </h3>
            <pre id="source-view" tabindex="-1" class="language-php line-numbers linkable-line-numbers"><code>&lt;?php
/**
 * Router component.
 *
 * @package HivePress\Components
 */

namespace HivePress\Components;

use HivePress\Helpers as hp;

// Exit if accessed directly.
defined( &#039;ABSPATH&#039; ) || exit;

/**
 * Handles URL routing.
 */
final class Router extends Component {

	/**
	 * All routes.
	 *
	 * @var array
	 */
	protected $routes = [];

	/**
	 * The current route.
	 *
	 * @var array
	 */
	protected $route;

	/**
	 * Class constructor.
	 *
	 * @param array $args Component arguments.
	 */
	public function __construct( $args = [] ) {

		// Register REST routes.
		add_action( &#039;rest_api_init&#039;, [ $this, &#039;register_rest_routes&#039; ] );

		// Add rewrite rules.
		add_action( &#039;init&#039;, [ $this, &#039;add_rewrite_rules&#039; ] );

		// Set rewrite slugs.
		add_filter( &#039;register_post_type_args&#039;, [ $this, &#039;set_rewrite_slug&#039; ], 10, 2 );
		add_filter( &#039;register_taxonomy_args&#039;, [ $this, &#039;set_rewrite_slug&#039; ], 10, 2 );

		// Flush rewrite rules.
		add_action( &#039;hivepress/v1/activate&#039;, [ $this, &#039;flush_rewrite_rules&#039; ] );
		add_action( &#039;hivepress/v1/update&#039;, [ $this, &#039;flush_rewrite_rules&#039; ] );
		add_action( &#039;hivepress/v1/deactivate&#039;, [ $this, &#039;flush_rewrite_rules&#039; ] );

		if ( ! is_admin() ) {

			// Set page title.
			add_filter( &#039;document_title_parts&#039;, [ $this, &#039;set_page_title&#039; ] );

			// Disable page title.
			add_filter( &#039;rank_math/frontend/title&#039;, [ $this, &#039;disable_page_title&#039; ] );

			// Set page context.
			add_filter( &#039;hivepress/v1/templates/page&#039;, [ $this, &#039;set_page_context&#039; ] );

			// Set page template.
			add_filter( &#039;template_include&#039;, [ $this, &#039;set_page_template&#039; ], 10000 );

			// Disable page redirect.
			add_filter( &#039;redirect_canonical&#039;, [ $this, &#039;disable_page_redirect&#039; ] );
		}

		parent::__construct( $args );
	}

	/**
	 * Gets routes.
	 *
	 * @return array
	 */
	protected function get_routes() {
		if ( empty( $this-&gt;routes ) ) {

			// Merge routes.
			foreach ( hivepress()-&gt;get_controllers() as $controller ) {
				$this-&gt;routes = hp\merge_arrays( $this-&gt;routes, $controller-&gt;get_routes() );
			}

			/**
			 * Filters URL routes registered by HivePress. If you customize the route URLs using this hook, don&#039;t forget to refresh permalinks afterwards.
			 *
			 * @hook hivepress/v1/routes
			 * @param {array} $routes Route configurations.
			 * @return {array} Route configurations.
			 */
			$this-&gt;routes = apply_filters( &#039;hivepress/v1/routes&#039;, $this-&gt;routes );
		}

		return $this-&gt;routes;
	}

	/**
	 * Gets route.
	 *
	 * @param string $name Route name.
	 * @return array
	 */
	public function get_route( $name ) {
		return hp\get_array_value( $this-&gt;get_routes(), $name );
	}

	/**
	 * Gets the current route.
	 *
	 * @return array
	 */
	public function get_current_route() {
		if ( ! isset( $this-&gt;route ) ) {
			$this-&gt;route = false;

			if ( hivepress()-&gt;request-&gt;get_param( &#039;route&#039; ) ) {

				// Get route name.
				$name = hivepress()-&gt;request-&gt;get_param( &#039;route&#039; );

				// Get route.
				$route = $this-&gt;get_route( $name );

				if ( $route &amp;&amp; ! hp\get_array_value( $route, &#039;rest&#039; ) ) {
					$this-&gt;route = array_merge( $route, [ &#039;name&#039; =&gt; $name ] );
				}
			} else {

				// Match routes.
				foreach ( $this-&gt;get_routes() as $name =&gt; $route ) {
					if ( isset( $route[&#039;match&#039;] ) &amp;&amp; call_user_func( $route[&#039;match&#039;] ) ) {
						$this-&gt;route = array_merge( $route, [ &#039;name&#039; =&gt; $name ] );

						break;
					}
				}
			}
		}

		return $this-&gt;route;
	}

	/**
	 * Gets the current route name.
	 *
	 * @return string
	 */
	public function get_current_route_name() {
		return hp\get_array_value( $this-&gt;get_current_route(), &#039;name&#039; );
	}

	/**
	 * Gets URL path.
	 *
	 * @param string $name Route name.
	 * @return string
	 */
	protected function get_url_path( $name ) {
		$path = &#039;&#039;;

		// Get route.
		$route = $this-&gt;get_route( $name );

		// Merge paths.
		while ( $route ) {
			if ( isset( $route[&#039;path&#039;] ) ) {
				$path = $route[&#039;path&#039;] . $path;
			}

			if ( isset( $route[&#039;base&#039;] ) ) {
				$route = $this-&gt;get_route( $route[&#039;base&#039;] );
			} else {
				break;
			}
		}

		return $path;
	}

	/**
	 * Gets URL parameters.
	 *
	 * @param string $name Route name.
	 * @return array
	 */
	protected function get_url_params( $name ) {
		preg_match_all( &#039;/&lt;([a-z_]+)&gt;/&#039;, $this-&gt;get_url_path( $name ), $params );

		array_shift( $params );

		return hp\get_first_array_value( $params );
	}

	/**
	 * Gets route URL.
	 *
	 * @param string $name Route name.
	 * @param array  $query URL query.
	 * @param bool   $filter Remove custom query parameters?
	 * @return string
	 */
	public function get_url( $name, $query = [], $filter = false ) {
		$url = &#039;&#039;;

		// Get route.
		$route = $this-&gt;get_route( $name );

		if ( $route ) {
			if ( isset( $route[&#039;url&#039;] ) ) {

				// Set URL.
				$url = call_user_func( $route[&#039;url&#039;], $query );
			} else {

				// Get URL path.
				$path = $this-&gt;get_url_path( $name );

				if ( $path ) {

					// Get URL params.
					$params = $this-&gt;get_url_params( $name );

					// Get query variables.
					$vars = array_diff_key( $query, array_flip( $params ) );

					// Set URL query.
					$query = array_merge(
						array_fill_keys( $params, null ),
						array_diff_key( $query, $vars ),
						[
							&#039;route&#039; =&gt; $name,
						]
					);

					// Set URL path.
					if ( get_option( &#039;permalink_structure&#039; ) || hp\get_array_value( $route, &#039;rest&#039; ) ) {
						foreach ( $params as $param ) {
							$path = preg_replace( &#039;/\(\?P&lt;&#039; . preg_quote( $param, &#039;/&#039; ) . &#039;&gt;[^\)]+\)\??/&#039;, hp\get_array_value( $query, $param, &#039;&#039; ), $path );
						}

						$path = rtrim( str_replace( &#039;/?&#039;, &#039;/&#039;, $path ), &#039;/&#039; ) . &#039;/&#039;;
					} else {
						$path = &#039;/?&#039; . http_build_query( array_combine( hp\prefix( array_keys( $query ) ), $query ) );
					}

					// Set URL.
					if ( hp\get_array_value( $route, &#039;rest&#039; ) ) {
						$url = get_rest_url( null, &#039;hivepress/v1&#039; . $path );
					} else {
						$url = home_url( $path );
					}

					// Add query variables.
					if ( $vars &amp;&amp; ! $filter ) {
						$url = add_query_arg( array_map( &#039;rawurlencode&#039;, $vars ), $url );
					}
				}
			}
		}

		return $url;
	}

	/**
	 * Gets the current URL.
	 *
	 * @return string
	 */
	public function get_current_url() {
		global $wp;

		$path = rtrim( $wp-&gt;request, &#039;/&#039; ) . &#039;/&#039;;

		if ( $_GET ) {
			$path .= &#039;?&#039; . http_build_query( $_GET );
		}

		return home_url( $path );
	}

	/**
	 * Gets return URL.
	 *
	 * @param string $name Route name.
	 * @return string
	 */
	public function get_return_url( $name ) {
		return $this-&gt;get_url(
			$name,
			[
				&#039;redirect&#039; =&gt; $this-&gt;get_current_url(),
			]
		);
	}

	/**
	 * Gets admin URL.
	 *
	 * @param string $type Object type.
	 * @param int    $id Object ID.
	 * @return string
	 */
	public function get_admin_url( $type, $id ) {
		$path = &#039;&#039;;
		$args = [];

		switch ( $type ) {
			case &#039;user&#039;:
				$path = $type . &#039;-edit.php&#039;;
				$args = [
					&#039;user_id&#039; =&gt; $id,
				];

				break;

			case &#039;post&#039;:
				$path = $type . &#039;.php&#039;;
				$args = [
					&#039;action&#039; =&gt; &#039;edit&#039;,
					&#039;post&#039;   =&gt; $id,
				];

				break;

			case &#039;comment&#039;:
				$path = $type . &#039;.php&#039;;
				$args = [
					&#039;action&#039; =&gt; &#039;editcomment&#039;,
					&#039;c&#039;      =&gt; $id,
				];

				break;
		}

		return admin_url( $path . &#039;?&#039; . http_build_query( $args ) );
	}

	/**
	 * Gets redirect URL.
	 *
	 * @return string
	 */
	public function get_redirect_url() {
		return wp_validate_redirect( hp\get_array_value( $_GET, &#039;redirect&#039; ) );
	}

	/**
	 * Gets redirect callbacks.
	 *
	 * @param array $callbacks Callback arguments.
	 * @return array
	 */
	protected function get_redirect_callbacks( $callbacks ) {

		// Normalize callbacks.
		if ( count( $callbacks ) === 2 &amp;&amp; is_object( hp\get_first_array_value( $callbacks ) ) ) {
			$callbacks = [
				[
					&#039;callback&#039; =&gt; $callbacks,
					&#039;_order&#039;   =&gt; 5,
				],
			];
		}

		// Sort callbacks.
		$callbacks = array_filter(
			array_map(
				function( $args ) {
					return hp\get_array_value( $args, &#039;callback&#039; );
				},
				hp\sort_array( $callbacks )
			)
		);

		return $callbacks;
	}

	/**
	 * Registers REST routes.
	 */
	public function register_rest_routes() {
		foreach ( $this-&gt;get_routes() as $name =&gt; $route ) {
			if ( hp\get_array_value( $route, &#039;rest&#039; ) &amp;&amp; isset( $route[&#039;action&#039;] ) ) {
				register_rest_route(
					&#039;hivepress/v1&#039;,
					$this-&gt;get_url_path( $name ),
					[
						&#039;methods&#039;             =&gt; hp\get_array_value( $route, &#039;method&#039;, &#039;GET&#039; ),
						&#039;callback&#039;            =&gt; $route[&#039;action&#039;],
						&#039;permission_callback&#039; =&gt; &#039;__return_true&#039;,
					]
				);
			}
		}
	}

	/**
	 * Adds rewrite rules.
	 */
	public function add_rewrite_rules() {

		// Set rewrite tags.
		$tags = [ &#039;route&#039; ];

		foreach ( $this-&gt;get_routes() as $name =&gt; $route ) {
			if ( ! hp\get_array_value( $route, &#039;rest&#039; ) &amp;&amp; isset( $route[&#039;path&#039;] ) &amp;&amp; ( isset( $route[&#039;redirect&#039;] ) || isset( $route[&#039;action&#039;] ) ) ) {

				// Get URL path.
				$path = ltrim( $this-&gt;get_url_path( $name ), &#039;/&#039; );

				// Get URL params.
				$params = $this-&gt;get_url_params( $name );

				// Get query string.
				$query = ltrim(
					implode(
						&#039;&amp;&#039;,
						array_map(
							function( $index, $param ) {
								return hp\prefix( $param ) . &#039;=$matches[&#039; . ( $index + 1 ) . &#039;]&#039;;
							},
							array_keys( $params ),
							$params
						)
					) . &#039;&amp;hp_route=&#039; . rawurlencode( $name ),
					&#039;&amp;&#039;
				);

				// Add rewrite rules.
				add_rewrite_rule( &#039;^&#039; . $path . &#039;/?$&#039;, &#039;index.php?&#039; . $query, &#039;top&#039; );

				if ( hp\get_array_value( $route, &#039;paginated&#039; ) ) {
					add_rewrite_rule( &#039;^&#039; . $path . &#039;/page/(\d+)/?$&#039;, &#039;index.php?paged=$matches[&#039; . ( count( $params ) + 1 ) . &#039;]&amp;&#039; . $query, &#039;top&#039; );
				}

				// Add rewrite tags.
				$tags = array_merge( $tags, $params );
			}
		}

		// Add rewrite tags.
		foreach ( array_unique( $tags ) as $tag ) {
			add_rewrite_tag( &#039;%&#039; . hp\prefix( $tag ) . &#039;%&#039;, &#039;([^&amp;]+)&#039; );
		}
	}

	/**
	 * Sets rewrite slug.
	 *
	 * @param array  $args Default arguments.
	 * @param string $type Post type or taxonomy.
	 * @return array
	 */
	public function set_rewrite_slug( $args, $type ) {

		// Check arguments.
		if ( strpos( $type, &#039;hp_&#039; ) !== 0 || ! hp\get_array_value( $args, &#039;public&#039;, true ) ) {
			return $args;
		}

		// Get permalinks.
		$permalinks = (array) get_option( &#039;hp_permalinks&#039;, [] );

		if ( ! $permalinks ) {
			return $args;
		}

		// Set rewrite slug.
		$slug = hp\get_array_value( $permalinks, hp\unprefix( $type . &#039;_slug&#039; ) );

		if ( $slug ) {
			$args[&#039;rewrite&#039;][&#039;slug&#039;] = $slug;
		}

		return $args;
	}

	/**
	 * Flushes rewrite rules.
	 */
	public function flush_rewrite_rules() {
		delete_option( &#039;rewrite_rules&#039; );
	}

	/**
	 * Sets page title.
	 *
	 * @param array $parts Title parts.
	 * @return array
	 */
	public function set_page_title( $parts ) {

		// Get the current route.
		$route = $this-&gt;get_current_route();

		if ( $route &amp;&amp; isset( $route[&#039;title&#039;] ) ) {

			// Remove query title.
			if ( count( $parts ) &gt; 1 ) {
				array_shift( $parts );
			}

			// Add route title.
			array_unshift( $parts, $route[&#039;title&#039;] );
		}

		return $parts;
	}

	/**
	 * Disables page title.
	 *
	 * @param string $title Page title.
	 * @return string
	 */
	public function disable_page_title( $title ) {
		if ( hp\get_array_value( hivepress()-&gt;router-&gt;get_current_route(), &#039;title&#039; ) ) {
			return false;
		}

		return $title;
	}

	/**
	 * Sets page context.
	 *
	 * @param array $args Template arguments.
	 * @return array
	 */
	public function set_page_context( $args ) {
		$context = [];

		// Get title.
		$context[&#039;page_title&#039;] = hp\get_array_value( $this-&gt;get_current_route(), &#039;title&#039; );

		// @todo Remove theme-specific condition once fixed.
		if ( is_tax() &amp;&amp; ( ! function_exists( &#039;hivetheme&#039; ) || ! is_tax( &#039;hp_listing_category&#039; ) ) ) {
			$term = get_queried_object();

			// Set title.
			$context[&#039;page_title&#039;] = $term-&gt;name;

			// Set description.
			if ( $term-&gt;description ) {
				$context[&#039;page_description&#039;] = apply_filters( &#039;the_content&#039;, $term-&gt;description );
			}
		}

		return hp\merge_arrays(
			$args,
			[
				&#039;context&#039; =&gt; $context,
			]
		);
	}

	/**
	 * Sets page template.
	 *
	 * @param array $template Template filepath.
	 * @return string
	 */
	public function set_page_template( $template ) {
		global $wp_query;

		// Get the current route.
		$route = $this-&gt;get_current_route();

		if ( $route ) {

			// Set query variables.
			if ( isset( $route[&#039;path&#039;] ) ) {
				$wp_query-&gt;is_home = false;
				$wp_query-&gt;is_404  = false;
			}

			// Get menu redirect.
			$menu_redirect = home_url();

			foreach ( hivepress()-&gt;get_classes( &#039;menus&#039; ) as $menu_class ) {
				if ( $menu_class::get_meta( &#039;chained&#039; ) ) {

					// Create menu.
					$menu = hp\create_class_instance( $menu_class );

					if ( in_array( $route[&#039;name&#039;], array_column( $menu-&gt;get_items(), &#039;route&#039; ), true ) ) {

						// Get menu items.
						$menu_items      = $menu-&gt;get_items();
						$menu_item_names = array_keys( $menu_items );

						foreach ( $menu_items as $menu_item_name =&gt; $menu_item ) {
							if ( isset( $menu_item[&#039;route&#039;] ) ) {

								// Get redirect URL.
								if ( $menu_item[&#039;route&#039;] === $route[&#039;name&#039;] ) {
									$next_menu_item = hp\get_array_value( $menu_items, hp\get_array_value( $menu_item_names, array_search( $menu_item_name, $menu_item_names, true ) + 1 ) );

									if ( $next_menu_item ) {
										$menu_redirect = $next_menu_item[&#039;url&#039;];
									}

									break;
								}

								// Get menu route.
								$menu_route = $this-&gt;get_route( $menu_item[&#039;route&#039;] );

								if ( $menu_route &amp;&amp; isset( $menu_route[&#039;redirect&#039;] ) ) {
									foreach ( $this-&gt;get_redirect_callbacks( $menu_route[&#039;redirect&#039;] ) as $menu_route_redirect ) {
										if ( ! in_array( call_user_func( $menu_route_redirect ), [ null, true ], true ) ) {
											wp_safe_redirect( $menu_item[&#039;url&#039;] );

											exit;
										}
									}
								}
							}
						}

						break;
					}
				}
			}

			// Set title.
			$title = hp\get_array_value( $route, &#039;title&#039; );

			if ( is_callable( $title ) ) {
				$this-&gt;route[&#039;title&#039;] = call_user_func( $title );
			}

			// Redirect page.
			if ( isset( $route[&#039;redirect&#039;] ) ) {
				foreach ( $this-&gt;get_redirect_callbacks( $route[&#039;redirect&#039;] ) as $route_redirect ) {
					$redirect = call_user_func( $route_redirect );

					if ( $redirect ) {
						if ( is_bool( $redirect ) ) {
							$redirect = $menu_redirect;
						}

						wp_safe_redirect( $redirect );

						exit;
					}
				}
			}

			// Render page.
			if ( isset( $route[&#039;action&#039;] ) ) {
				echo call_user_func( $route[&#039;action&#039;] );

				exit;
			}
		}

		return $template;
	}

	/**
	 * Disables page redirect.
	 *
	 * @param string $url Redirect URL.
	 * @return string
	 */
	public function disable_page_redirect( $url ) {
		foreach ( hivepress()-&gt;get_config( &#039;post_types&#039; ) as $type =&gt; $args ) {
			if ( ! hp\get_array_value( $args, &#039;redirect_canonical&#039;, true ) &amp;&amp; is_singular( hp\prefix( $type ) ) ) {
				$url = false;

				break;
			}
		}

		return $url;
	}
}
</code></pre>
            </article>
            </div>
        </div>
        <a href="#top" class="phpdocumentor-back-to-top"><i class="fas fa-chevron-circle-up"></i></a>

    </main>

    <footer class="phpdocumentor phpdocumentor-footer">
    <div class="phpdocumentor-section">
        <span>HivePress Code Reference generated by <a href="http://www.phpdoc.org/">phpDocumentor</a> on October 23rd, 2024 at 10:56 pm.</span>
    </div>
</footer>

    <script>
        cssVars({});
    </script>
        </body>
</html>
